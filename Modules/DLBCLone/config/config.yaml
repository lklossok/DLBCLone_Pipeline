### A snakemake workflow of core DLBCLone functions used for classification.


# Genes offered by GAMBLR.predict used in training DLBCLone Models. DO NOT MODIFY.
gambl_genes: [
  "TNFRSF14","TP73","CCDC27","NOL9","MTOR","SPEN","ID3","ARID1A","ZC3H12A","RRAGC","BCL10",
  "CD58","NOTCH2","HIST2H2BE","CTSS","SEMA4A","FCGR2B","FCRLA","PRRC2C","SMG7","BTG2","ITPKB",
  "IRF2BP2","HNRNPU","SEC24C","PTEN","FAS","LCOR","EDRF1","WEE1","MPEG1","MS4A1","CCND1","FADD",
  "SESN3","BIRC3","ATM","POU2AF1","ETS1","WNK1","PTPN6","ETV6","KRAS","KMT2D","STAT6","BTG1",
  "ATP2A2","HVCN1","DTX1","SETD1B","BCL7A","FOXO1","RB1","CHD8","NFKBIA" ,"ZFP36L1","TCL1A","YY1",
  "CRIP1","TUBGCP5","MGA","B2M","RFX7","MAP2K1","SIN3A","IDH2","CHD2","CREBBP","TFAP4","USP7",
  "CIITA","SOCS1","IL4R","CD19","PLCG2","MBTPS1","IRF8","TP53","IKZF3","STAT5B","STAT3","CD79B",
  "GNA13","GRB2","ACTG1","KLHL14","BCL2","MED16","TCF3","CD70","S1PR2","SMARCA4","JUNB","KLF2",
  "JAK3","MEF2B","CD79A","POU2F2","DNMT3A","BIRC6","FBXO11","BCL11A","XPO1","PCBP1","DYSF","DUSP2",
  "CXCR4","ZEB2","METAP1D","SF3B1","BCL2L1","PTPN1","BMP7","PRDM15","IGLL5","XBP1","RAC2","EP300",
  "RFTN1","OSBPL10","MYD88","SETD2","RHOA","GNAI2","NFKBIZ","TBL1XR1","KLHL6","EIF4A2","BCL6",
  "HNRNPD","TET2","FBXW7","MEF2C","ZNF608","TNIP1","EBF1","IRF4","FOXC1","CD83","HIST1H3B","HIST1H1C",
  "HIST1H2BC","HIST1H2AC","HIST1H1E","HIST1H2BG","HIST1H1D","HIST1H2AG","HIST1H2BK","HIST1H1B",
  "HIST1H2AM","HLA-A","HLA-C","HLA-B","LTB","PRRC2A","HLA-DMB","PIM1","CCND3","TBCC","NFKBIE","EEF1A1",
  "TMEM30A","ZNF292","BACH2","PRDM1","SGK1","TNFAIP3","INTS1","CARD11","ACTB","PIK3CG","LRRN3","POT1",
  "BRAF","EZH2","KMT2C","ATP6V1B2","PRKDC","LYN","TOX","PABPC1","UBR5","MYC","CD274","CDKN2A","GRHPR",
  "NOTCH1","TRAF2","P2RY8","TMSB4X","DDX3X","PIM2","TAF1","BTK","UBE2A","PHF6","VMA21","ATP6AP1",
  "MYD88HOTSPOT","BCL2_SV","MYC_SV","BCL6_SV"
]


# DLBCLone model storage
opt_model_path: "data/opt_model" # DLBCLone models are saved using GAMBLR.predict::DLBCLone_save_optimized(), which requires a path to where the model will be stored. DLBCLone models are loaded using GAMBLR.predict::DLBCLone_load_optimized(), which requires a path to where the model is stored (contains .rds)
model_name_prefix: "opt" # saved DLBCLone models using GAMBLR.predict::DLBCLone_save_optimized() require a name prefix to be denoted by. Loaded DLBCLone models using GAMBLR.predict::DLBCLone_load_optimized() have a name prefix they're denoted by


# Run UMAP and optimize parameters for classifying samples using UMAP and k-nearest neighbor. DLBCLone model object is built and saved for future use in prediction.
build_dlbclone_model: 
    # Tunable parameters for GAMBLR.predict::make_and_annotate_umap() function. Run UMAP and attach result to metadata.
    core_features: # list input, for each subtype define features used for weighting. Make sure params as_r_list() is used in snakemake rule.
      ST2: ["SGK1", "DUSP2", "TET2", "SOCS1"]
      N1: ["NOTCH1"]
      EZB: ["EZH2", "BCL2_SV"]
      MCD: ["MYD88HOTSPOT", "CD79B", "PIM1"]
      BN2: ["BCL6_SV", "NOTCH2", "SPEN", "CD70"]
    core_feature_multiplier: 1.5 # what to multiply core features by
    hidden_features: null # features from gambl_genes you want removed from your trained DLBCLone model

    # Tunable parameters for GAMBLR.predict::DLBCLone_optimize_parameters() function.
    truth_classes: ["EZB", "MCD", "ST2", "N1", "BN2", "Other"] # List all truth classes found in the truth column
    min_k: 3 # Starting k for knn (Default: 3)
    max_k: 33 # Ending k for knn (Default: 33)


dlbclone_predict: # Predict DLBCL genetic subgroup for one or more samples using a pre-trained DLBCLone model

    test_data_dir: "data/test_mutation_matrix.tsv" # path to test mutation matrix 
    pred_dir: "data" # path to store DLBCLone predictions

    # OPTIONAL: Tunable parameters for GAMBLR.predict::DLBCLone_predict() function
    fill_missing: true # if TRUE, any features present in the model but not seen in test mutation matrix are added and set to zero. If FALSE, missing model features cause an error
    drop_extra: false # if TRUE, any features present in test mutation matrix but not seen during model training are dropped
